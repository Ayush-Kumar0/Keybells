<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>
            <%= locals.title %>
        </title>
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Montserrat|Ubuntu" rel="stylesheet">

        <!-- CSS Stylesheets -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <!-- External CSS -->
        <link rel="stylesheet" href="/css/asideAndHideAside.css" type="text/css">
        <link rel="stylesheet" href="/css/navbar.css" type="text/css">
        <link rel="stylesheet" href="/css/history.css" type="text/css">
        <link rel="stylesheet" href="/css/myParas.css" type="text/css">

        <!-- Font Awesome -->
        <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>

        <!-- JQuery AJAX -->
        <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>

        <!-- Bootstrap Scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


        <!-- External Scripts -->
        <script defer src="/scripts/myParas.js"></script>
        <script defer src="/scripts/aside.js"></script>
        <script defer src="/scripts/clearLocalStorage.js"></script>

        <!-- Noty Requirements -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.css">
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.js"></script>
    </head>

    <body>

        <!-- Navigation bar -->
        <section class="navv">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <a class="navbar-brand" href="/">Keybells</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="/user/lesson">Lessons <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/user/custom">Custom</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="/user/myParas">My Paragraphs</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/user/challenges">Challenges</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/user/ranking">Ranking</a>
                        </li>
                    </ul>
                </div>
                <ul>
                    <li class="nav-item dropdown">
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="/user/profile?username=<%= locals.username %> ">Profile</a>
                            <a class="dropdown-item" href="/user/sign-out">Sign Out</a>
                        </div>
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-user"></i>
                        </a>
                    </li>
                </ul>
            </nav>
        </section>


        <!-- Levels section -->
        <section class="main-section">
            <div class="levels">
                <div class="alphabet">
                    <a>
                        <div class="add">
                            <img src="/images/myParas/plus-solid.svg" alt="Add">
                        </div>
                    </a>
                </div>
                <div class="alphabet">
                    <% for(let i=0;i<locals.paras.length;i++){ %>

                        <div class="box">
                            <a href="/user/type?which=myParas&id=<%= locals.paras[i]._id %>">
                                <h1>
                                    <%= i+1 %>
                                </h1>
                                <div class="stars-container">
                                    <div class="one" <% if (locals.paras[i].stars>=1) { %>
                                        <%- `style="color:gold;" ` %>
                                            <% } %> ><i class="stars fas fa-star fa-3x"></i>
                                    </div>
                                    <div class="two" <% if (locals.paras[i].stars>=2) { %>
                                        <%- `style="color:gold;" ` %>
                                            <% } %> ><i class="stars fas fa-star fa-3x"></i>
                                    </div>
                                    <div class="three" <% if (locals.paras[i].stars>=3) { %>
                                        <%- `style="color:gold;" ` %>
                                            <% } %> ><i class="stars fas fa-star fa-3x"></i>
                                    </div>
                                    <div class="four" <% if (locals.paras[i].stars>=4) { %>
                                        <%- `style="color:gold;" ` %>
                                            <% } %> ><i class="stars fas fa-star fa-3x"></i>
                                    </div>
                                    <div class="five" <% if (locals.paras[i].stars>=5) { %>
                                        <%- `style="color:gold;" ` %>
                                            <% } %> ><i class="stars fas fa-star fa-3x"></i>
                                    </div>
                                </div>
                            </a>
                            <div class="delete">
                                <button onclick="deletePara(this,'<%= locals.paras[i]._id %>')"><img src="/images/myParas/delete.svg" alt="delete"></button>
                            </div>
                        </div>

                        <% } %>
                </div>
            </div>
        </section>


        <div class="addPara">
            <img src="/images/myParas/close-sharp.svg" alt="Close">
            <div class="fileDiv">
                <form action="/user/myParas/addByFile" method="post" enctype="multipart/form-data">
                    <div>
                        <input type="file" name="submitted-file" accept="text/plain, .txt" id="" required>
                    </div>
                    <div>
                        <input class="button" type="submit" value="Submit File">
                    </div>
                </form>
            </div>
            <h3>OR</h3>
            <div class="textDiv">
                <form action="/user/myParas/addByText" method="post">
                    <div class="textAreaDiv">
                        <textarea name="submitted-text" placeholder="Write your paragraph here..." rows="5"></textarea>
                    </div>
                    <div>
                        <input class="button" type="reset" value="Reset">
                        <input class="button" type="submit" value="Submit Text">
                    </div>
                </form>
            </div>
        </div>


        <!-- Aside section -->
        <section class="asidee">

            <div class="aside">
                <!-- <i class="iconn fas fa-star fa-3x"></i> -->
                <h4 class="" id="score">Score: <%= locals.score %>
                </h4>
            </div>

            <div class="aside">
                <!-- <i class="iconn fas fa-star fa-3x"></i> -->
                <h4 class="" id="stars">Stars: <%= locals.stars %>
                </h4>
            </div>

            <div class="aside">
                <!-- <i class="iconn fas fa-star fa-3x"></i> -->
                <h4 class="" id="avgwpm">Average Speed: <%= locals.avgSpeed %> WPM
                </h4>
            </div>

            <div class="aside">
                <h4 class="" id="tried">Total: <%= locals.paras.length %>
                </h4>
            </div>

        </section>

        <!-- Button to show/hide aside -->
        <div id="hideAsidee">
            <img src="/images/eye-slash-solid.svg">
            Progress
        </div>

        <section class="history">
            <div>
                <h4>History :</h4>
            </div>
            <table>
                <thead>
                    <th>Sr.No.</th>
                    <th>Paragraph</th>
                    <th>Score</th>
                    <th>Stars</th>
                    <th>Speed</th>
                    <th>Accuracy</th>
                    <th>Time</th>
                </thead>
                <!-- <tr>
                    <td>1</td>
                    <td>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deserunt voluptatum blanditiis aliquam aliquid saepe quia ad fugiat maiores fuga quo.</td>
                    <td>350</td>
                    <td>4</td>
                    <td>45</td>
                    <td>98%</td>
                    <td>4/1/2022</td>
                </tr> -->
            </table>
        </section>



        <script>
            <% if (locals.flash.success && locals.flash.success.length > 0) { %>
                new Noty({
                    theme: 'relax',
                    layout: 'topRight',
                    type: 'success',
                    text: '<%= locals.flash.success %>',
                    timeout: 1500
                }).show();
            <% } %>
            <% if (locals.flash.error && locals.flash.error.length > 0) { %>
                new Noty({
                    theme: 'relax',
                    layout: 'topRight',
                    type: 'error',
                    text: '<%= locals.flash.error %>',
                    timeout: 1500
                }).show();
            <% } %>
        </script>
    </body>

</html>
